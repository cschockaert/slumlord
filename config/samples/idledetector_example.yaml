# Example: Detect idle deployments using less than 5% CPU and 10% memory for 1 hour
apiVersion: slumlord.io/v1alpha1
kind: SlumlordIdleDetector
metadata:
  name: idle-detector
  namespace: default
spec:
  selector:
    matchLabels:
      slumlord.io/managed: "true"
    types:
      - Deployment
      - StatefulSet
  thresholds:
    cpuPercent: 5
    memoryPercent: 10
  idleDuration: "1h"
  action: alert
---
# Example: Auto-scale idle workloads after 30 minutes
apiVersion: slumlord.io/v1alpha1
kind: SlumlordIdleDetector
metadata:
  name: idle-scaler
  namespace: default
spec:
  selector:
    matchLabels:
      slumlord.io/managed: "true"
    types:
      - Deployment
  thresholds:
    cpuPercent: 3
    memoryPercent: 5
  idleDuration: "30m"
  action: scale
---
# Example: Right-size idle workloads in-place (requires Kubernetes 1.33+)
# Checks every 10 minutes and resizes pods with 30% headroom above actual usage
apiVersion: slumlord.io/v1alpha1
kind: SlumlordIdleDetector
metadata:
  name: idle-resizer
  namespace: default
spec:
  selector:
    matchLabels:
      slumlord.io/managed: "true"
    types:
      - Deployment
      - StatefulSet
  thresholds:
    cpuPercent: 10
    memoryPercent: 15
  idleDuration: "1h"
  action: resize
  reconcileInterval: 10m
  resize:
    bufferPercent: 30
    minRequests:
      cpu: "50m"
      memory: "64Mi"
